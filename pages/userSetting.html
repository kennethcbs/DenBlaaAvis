<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
	<title> My Form </title>
	<link rel="stylesheet" href="styleRegistration.css">
	<style>
		body {
			background-image: url("background1.jpg");
			background-repeat: no-repeat;
			background-size: cover;
		}
	</style>
</head>
<body>
	<form id="form">
		<h1 class="text">Settings</h1>
			<label>Username</label>
			<input type="text" id='username' name="username" placeholder="Kenneth">
			<br><br>

			<label>Email ID</label>
			<input type="email" id='email' name="email" placeholder="Example@example.com">
			<br><br>

			<label>Password</label>
			<input type="password" id="password" name="password" >
			<br><br>

			<button class="regbtn" type ="reset">Reset</button>
            <input type="submit" placeholder="submit">
        	</form>
	<br><br>
      <button onclick="deleteUser()" class="regbtn" type="submit" id="delete">Delete user</button>
      <br><br><br><br>

    <script>
      function deleteUser() {
        console.log("slete brug")
          fetch("http://localhost:3000/deleteUser", {
          method: "DELETE",
        })
          .then((response) => response.text())
          .then((response) => {
            if (response) {
            location.href = "/dashboard";
            window.alert("user deleted");
            } 
          })
          .catch(() => {
            window.alert("Der skete en fejl");
          });
      }


        document.getElementById("form").addEventListener("submit", (event) => {
            event.preventDefault();
            const username = document.getElementById("username").value
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value

            const user = {
                username: username,
                email: email,
                password: password
            }
            
        fetch("http://localhost:3000/updateUser", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(user)
      })
        .then((response) => response.text())
        .then((response) => {
          if (response) {
           location.href = "/settings";
           window.alert("user updated");
          } 
        })
        .catch(() => {
          window.alert("Der skete en fejl");
        });

        });
      </script> 
  </body>
</html>
