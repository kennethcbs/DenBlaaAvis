<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
	<title> My Form </title>
	<link rel="stylesheet" href="styleLogin.css">
	<style>
		body {
			background-image: url("background1.jpg");
			background-repeat: no-repeat;
			background-size: cover;
		}
	</style>
</head>
<body>
		<form id="form">
			<h1 class="text">Login</h1>
			<label>Email:</label>
			<input type ="email" id='email' name="email" placeholder="Example@example.com" required>
			<br>
			<br>
			<label>Password:</label>
			<input type="password" id="password" name="password" required>
			<br>
			<br>
			<button class="loginbtn" type ="reset">Reset</button>
			<button class="loginbtn" type ="submit">Submit</button>
			</form>
			<br><br><br> <br>
			<p class="text" >Don't have an account?</p>
			<form class="loginbtn" action="./registration.html">
				<button class="loginbtn">Register an account</button>
			</form>

    <script>
        document.getElementById("form").addEventListener("submit", (event) => {
            event.preventDefault()

            const email = document.getElementById("email").value
            const password = document.getElementById("password").value
            const emailJSON = JSON.stringify(email)
            const passwordJSON = JSON.stringify(password)

            const login = {
                email: email,
                password: password
            }

            fetch("http://localhost:3000/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(login)
      }) 
      .then((response) => response.text())
        .then((response) => {
          if (response) {
            console.log(response)
            location.href = "/dashBoard";
          } 
        })
        .catch(() => {
          window.alert("Der skete en fejl");
        });           
        })
    </script>
</body>
</html>